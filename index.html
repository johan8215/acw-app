<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allston Car Wash</title>
  <link rel="stylesheet" href="style.css">
  <script src="config.js"></script>
  <script src="app.js"></script>
</head>
<body>
  <div class="container">
    <h1>ALLSTON CAR WASH</h1>

    <!-- LOGIN -->
    <div id="login">
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Password">
      <button onclick="loginUser()">Sign In</button>
    </div>

    <!-- WELCOME AREA -->
    <div id="welcome" style="display:none;">
      <h2>Welcome, <span id="userName"></span></h2>
      <p>Role: <span id="userRole"></span></p>

      <!-- ğŸ”’ Logout centrado -->
      <button onclick="logoutUser()" class="logout-btn">Logout</button>

      <div id="schedule"></div>
    </div>
  </div>
</body>
</html>

    <!-- âš™ï¸ BOTÃ“N DE CONFIGURACIÃ“N -->
    <button id="gearButton" class="gear-btn" onclick="openSettings()">âš™ï¸</button>

    <!-- ğŸ§© PANEL FLOTANTE -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeSettings()">&times;</span>
        <h3>Settings</h3>
        <hr>
        <button class="mini-btn" onclick="togglePasswordPanel()">Change Password</button>
        <button class="mini-btn" onclick="logoutUser()">Logout</button>

        <!-- ğŸ”’ PANEL DE CAMBIO DE PASSWORD -->
        <div id="passwordPanel" style="display:none; margin-top:10px;">
          <input type="password" id="newPassword" placeholder="New password">
          <input type="password" id="confirmPassword" placeholder="Confirm password">
          <button class="mini-btn" onclick="changeUserPassword()">Save</button>
          <p id="settingsMsg"></p>
        </div>
      </div>
    </div>

    <div id="schedule"></div>
  </div>
</div>
  <script>
    /* ===========================================================
       ğŸ—“ï¸ Mostrar semana activa al cargar login
       =========================================================== */
    window.addEventListener("load", async () => {
      const label = document.getElementById("activeWeek");
      try {
        const res = await fetch(`${CONFIG.BASE_URL}?action=getActiveWeek`);
        const data = await res.json();
        if (data.week) label.textContent = `ğŸ“… Active Week: ${data.week}`;
        else label.textContent = "No active week found";
      } catch (err) {
        label.textContent = "Unable to load week";
      }
    });
  </script>
</body>
</html>
<section id="settings" style="display:none;">
  <h2>âš™ï¸ Settings</h2>

  <div class="password-change">
    <input type="password" id="newPassword" placeholder="New password">
    <input type="password" id="confirmPassword" placeholder="Confirm password">
    <button onclick="changeUserPassword()">Change Password</button>
    <p id="settingsMsg"></p>
  </div>

  <div class="logout-section">
    <button class="logoutBtn" onclick="logoutUser()">ğŸšª Log Out</button>
  </div>

  <hr>

  <div class="app-info">
    <p>ğŸŒ <a href="https://allstoncarwash.com" target="_blank">allstoncarwash.com</a></p>
    <p>ğŸ“ (617) 254-3200</p>
    <p>âš™ï¸ ACW-App v3.8 Connected Stable</p>
    <p class="powered">Powered by <b>JAG15</b> | Allston Car Wash Â© 2025</p>
  </div>
</section>
