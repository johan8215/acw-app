<!doctype html><html lang="es"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Allston Car Wash</title>
<link rel="manifest" href="manifest.json"/><meta name="theme-color" content="#0d2740"/>
<script src="config.js"></script>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<style>
:root{--bg1:#07182a;--bg2:#0e2741;--glass:rgba(255,255,255,.08);--glass-border:rgba(255,255,255,.18);--fg:#d9e6f2;--muted:#9db4c7;--accent:#58a6ff}
*{box-sizing:border-box}body{margin:0;min-height:100vh;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--fg);background:radial-gradient(1200px 600px at 70% 30%,#103255 0%,transparent 60%),linear-gradient(160deg,var(--bg1),var(--bg2));display:flex;flex-direction:column}
header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:44px;height:44px;border-radius:12px;background:linear-gradient(#2c6db2,#1b4f83);border:1px solid var(--glass-border);display:grid;place-items:center;box-shadow:0 8px 32px rgba(0,0,0,.35);animation:float 6s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0) rotate(0)}50%{transform:translateY(-3px) rotate(1deg)}}
.badge{font-size:14px;padding:8px 14px;border-radius:12px;background:var(--glass);border:1px solid var(--glass-border)}
.top-actions{display:flex;align-items:center;gap:10px}.lang,.phone{padding:8px 12px;border-radius:999px;border:1px solid var(--glass-border);background:var(--glass);color:#eaf2fb}
.container{flex:1;display:grid;place-items:center;padding:30px 16px}.card{width:min(880px,92vw);border-radius:20px;padding:22px;background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06));border:1px solid var(--glass-border);box-shadow:0 20px 60px rgba(0,0,0,.35);backdrop-filter:blur(10px)}
h1{margin:4px 0 2px;font-size:24px}.subtitle{color:var(--muted);font-size:14px;margin-bottom:16px}
.row{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}.input{flex:1;min-width:220px;display:flex;align-items:center;gap:8px;border:1px solid var(--glass-border);background:rgba(255,255,255,.06);border-radius:12px;padding:10px 12px}
.input input{flex:1;border:none;outline:none;background:transparent;color:var(--fg);font-size:16px}
button.primary{background:linear-gradient(180deg,#3b82f6,#1f64cc);border:none;color:#fff;padding:10px 16px;border-radius:12px;font-weight:600;cursor:pointer;box-shadow:0 8px 24px rgba(59,130,246,.35)}
.g-btn{border:1px solid var(--glass-border);background:#fff;color:#111;border-radius:12px;padding:8px 14px;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer}
.error{margin-top:10px;color:#ffb4b4;font-weight:600}.week{font-weight:600;color:#b7d4ff}.list{margin-top:14px;display:grid;gap:8px}
.item{display:flex;justify-content:space-between;padding:12px 14px;border-radius:12px;background:rgba(255,255,255,.04);border:1px solid var(--glass-border)}
footer{text-align:center;padding:10px;color:#9fb0c2;font-size:13px}
</style></head>
<body>
<header>
  <div class="brand">
    <div class="logo"><span>ACW</span></div>
    <div><div style="font-weight:700">Allston Car Wash</div><div class="badge" style="font-size:12px">Employee & Manager Portal</div></div>
  </div>
  <div class="top-actions">
    <a class="phone" href="tel:+16172543200">ðŸ“ž (617) 254-3200</a>
    <select id="lang" class="lang"><option value="en">English</option><option value="es" selected>EspaÃ±ol</option></select>
  </div>
</header>
<div class="container">
  <div class="card" id="loginCard">
    <h1 id="title">Bienvenido ðŸ‘‹</h1>
    <div class="subtitle" id="subtitle">Inicia sesiÃ³n con Google y escribe tu contraseÃ±a temporal.</div>
    <div class="row">
      <button class="g-btn" id="googleBtn"><img alt="" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18" height="18"><span id="gtext">Sign in with Google</span></button>
      <div class="input"><input id="email" type="email" placeholder="tuemail@ejemplo.com"></div>
      <div class="input" style="max-width:220px"><input id="pass" type="password" placeholder="ContraseÃ±a (ej. 0000)"></div>
      <button class="primary" id="enterBtn">Entrar</button>
    </div>
    <div class="error" id="err"></div>
  </div>
  <div class="card" id="dash" style="display:none">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h1 id="hello">Hola</h1><div class="week" id="week"></div>
    </div>
    <div class="subtitle" id="role">Employee</div>
    <div class="list" id="days"></div>
    <div class="row" style="justify-content:flex-end"><button class="primary" id="logout">Sign out</button></div>
  </div>
</div>
<footer>Allston Car Wash Â© 2025 â€¢ Built by Johan A. Giraldo</footer>
<script>
const T={en:{welcome:"Welcome",sub:"Sign in with Google and enter your temporary password.",gtext:"Sign in with Google",emailPh:"you@example.com",passPh:"Password (e.g., 0000)",enter:"Enter",employee:"Employee",signout:"Sign out"},es:{welcome:"Bienvenido",sub:"Inicia sesiÃ³n con Google y escribe tu contraseÃ±a temporal.",gtext:"Iniciar con Google",emailPh:"tuemail@ejemplo.com",passPh:"ContraseÃ±a (ej. 0000)",enter:"Entrar",employee:"Empleado",signout:"Salir"}};
const S=(k)=>localStorage.getItem(k)||""; const SS=(k,v)=>localStorage.setItem(k,v);
const state={lang:(ACW_CONFIG.DEFAULT_LANG||'es')};
function setLang(l){state.lang=l;SS('lang',l);const t=T[l];title.textContent=t.welcome+" ðŸ‘‹";subtitle.textContent=t.sub;gtext.textContent=t.gtext;email.placeholder=t.emailPh;pass.placeholder=t.passPh;enterBtn.textContent=t.enter;logout.textContent=t.signout;}
setLang(S('lang')||state.lang); lang.value=S('lang')||state.lang; lang.addEventListener('change',e=>setLang(e.target.value));
function showErr(m){err.textContent=m; setTimeout(()=>err.textContent="",4000);}
window.onload=function(){ if(window.google){ google.accounts.id.initialize({client_id:ACW_CONFIG.GOOGLE_CLIENT_ID, callback:cred=>{ try{const p=JSON.parse(atob(cred.credential.split('.')[1])); email.value=(p.email||'').toLowerCase(); }catch(_){}}}); google.accounts.id.renderButton(googleBtn,{theme:"outline",size:"large"});}}
async function callBackend(path,params={}){ const u=new URL(ACW_CONFIG.BACKEND_URL); u.searchParams.set('action',path); Object.entries(params).forEach(([k,v])=>u.searchParams.set(k,v)); const r=await fetch(u.toString()); if(!r.ok) throw new Error("Network"); return r.json(); }
async function login(){ const em=(email.value||'').trim().toLowerCase(); const pw=(pass.value||'').trim(); if(!em)return showErr(state.lang==='es'?'Escribe tu email.':'Enter your email.'); if(!pw)return showErr(state.lang==='es'?'Escribe tu contraseÃ±a.':'Enter your password.'); try{ const res=await callBackend('login',{email:em,password:pw}); if(!res.ok) return showErr(res.error||'Access denied'); SS('email',em); SS('name',res.name||''); SS('role',res.role||'Employee'); await loadSchedule(em); loginCard.style.display='none'; dash.style.display='block'; }catch(e){ showErr('Network error'); } }
enterBtn.addEventListener('click',login);
async function loadSchedule(em){ try{ const res=await callBackend('getScheduleByEmail',{email:em}); week.textContent=res.week||''; hello.textContent=(state.lang==='es'?'Hola ':'Hello ')+(S('name')||'')+' ðŸ‘‹'; role.textContent=S('role')||'Employee'; days.innerHTML=''; (res.days||[]).forEach(d=>{ const row=document.createElement('div'); row.className='item'; row.innerHTML=`<div>${d.name}</div><div>${d.shift||'â€”'}</div>`; days.appendChild(row); }); }catch(e){ showErr('Network error'); } }
logout.addEventListener('click',()=>{ ['email','name','role'].forEach(k=>localStorage.removeItem(k)); dash.style.display='none'; loginCard.style.display='block';});
if('serviceWorker' in navigator){ navigator.serviceWorker.register('sw.js'); }
</script>
</body></html>
